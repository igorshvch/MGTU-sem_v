# 18. [Документоориентированные СУБД: примеры](#документоориентированные-субд-примеры). [CAP-теорема (теорема Брюера)](#cap-теорема-теорема-брюера). [ACID и BASE как следствия теоремы Брюера](#acid-и-base-как-следствия-теоремы-брюера). [Модель "согласованность в конечном счёте": что означает, примеры применения, достоинства и недостатки](#модель-согласованность-в-конечном-счёте-что-означает-примеры-применения-достоинства-и-недостатки)

## Документоориентированные СУБД: примеры

![Примеры БД](pics/018_001.PNG)

### MongoDB

- NoSQL документоориентированная СУБД
- Февраль 2009 – первая версия
- Исходный код: [https://github.com/mongodb/mongo](https://github.com/mongodb/mongo)
- Поддержка ОС: Windows Vista+, Linux, OS X 10.7+, Solaris, FreeBSD
- Возможности:
  - Запросы
  - Индексация
  - Репликация
  - Балансировка нагрузки
  - Файловое хранилище
  - Агрегация данных
  - Исполнение JavaScript на сервере
  - Коллекции с фиксированным размером
  - Транзакции в пределах одного документа
  - Междокументные транзакции (версия 4.0, июнь 2018)

![Терминология MongoDB](pics/018_002.PNG)

- Формат хранения и передачи данных – BSON (бинарный JSON)

## CAP-теорема (теорема Брюера)

## ACID и BASE как следствия теоремы Брюера

## Модель "согласованность в конечном счёте": что означает, примеры применения, достоинства и недостатки

### Понятие распределенной системы и модели согласованности

**Распределенная система** - на базовом уровне это совокупность ЭВМ, подключенных к единой сети, которые работают вместе, образуя единую машину для конечного пользователя. Все эти распределенные машины имеют одно общее состояние и работают одновременно. Применительно к **БД** - это база данных, составные части которой размещаются в различных узлах компьютерной сети в соответствии с каким-либо критерием.

[**Модель согласованности**](https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D1%81%D0%BE%D0%B3%D0%BB%D0%B0%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8) - это подход, используемый в той или иной распределённой системе (распределённой общей памяти, **СУБД**, файловой системе), для обеспечения гарантий согласованности данных.

### "Согласованность в конечном счете"

Это одна из моделей согласованности, используемая в распределённых системах для достижения высокой доступности, в рамках которой гарантируется, что в отсутствие изменений данных, через какой-то промежуток времени после последнего обновления ("в конечном счёте") все запросы будут возвращать последнее обновлённое значение. Реализует оптимистичную репликацию[^1].

---
[^1]: Optimistic replication, also known as lazy replication, is a strategy for replication, in which replicas are allowed to diverge.
Traditional pessimistic replication systems try to guarantee from the beginning that all of the replicas are identical to each other, as if there was only a single copy of the data all along. Optimistic replication does away with this in favor of eventual consistency, meaning that replicas are guaranteed to converge only when the system has been quiesced for a period of time. As a result, there is no longer a need to wait for all of the copies to be synchronized when updating data, which helps concurrency and parallelism. The trade-off is that different replicas may require explicit reconciliation later on, which might then prove difficult or even insoluble.
[https://en.wikipedia.org/wiki/Optimistic_replication](https://en.wikipedia.org/wiki/Optimistic_replication)
