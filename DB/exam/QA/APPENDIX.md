# Дополнительные материалы и уточнения, не вошедшие в список вопросов

## Управление параллелизмом

### Пессиместическое

Характеристики:

- Система блокировок не допускает, чтобы изменение данных одними пользователями влияло на других пользователей.
- После выполнения действия, ведущего к установке блокировки, другие пользователи не могут выполнять действия, конфликтующие с блокировкой пока её владелец не снимет её
- Используется в системах с высокой конкуренцией за данные, где затраты на защиту данных с помощью блокировок меньше затрат на откат транзакций в случае конфликтов параллелизма.

### Оптимистическое

Характеристики:

- Данные не блокируются на период чтения
- Когда пользователь обновляет данные, система проверяет, вносил ли другой пользователь в них изменение после считывания.
- Если другой пользователь изменял данные, возникает ошибка.
- При получении ошибки, как правило, требуется повторить операцию заново
- Используется в системах с низкой конкуренцией за данные, где затраты на периодический откат транзакции меньше затрат на блокировку данных при считывании.

### Реализация управления параллелизмом

- Блокировки – для пессимистического. Реализуются в СУБД

  - Транзакция может запрашивать блокировки различных ресурсов: строк, страниц, таблиц
  - Блокировка не дает другим транзакциям изменять ресурсы
  - Блокировка снимается после завершения транзакции

- Управление версиями строк – для оптимистического. Реализуются на прикладном уровне

  - В таблицах хранятся версии каждой измененной строки
  - При попытке изменить данные проверяется, что версия не изменилась по сравнению с той, которую прочитал пользователь, выполняющий модификацию данных
  - Вероятность того, что операция чтения будет блокировать другие транзакции, значительно снижается.
